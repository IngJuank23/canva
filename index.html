<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Curso Básico de Canva</title>
  <style>
    :root{
      --bg:#0b0b0f; --panel:#12121a; --card:#161621; --text:#e9e9f1; --muted:#a3a3b2;
      --brand:#7cfbde; --brand2:#8b5cf6; --ok:#22c55e; --danger:#ef4444; --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0;background:#0b0b0f;color:var(--text);font-family:Poppins,system-ui,Segoe UI,Roboto}
    header{position:sticky;top:0;background:#12121acc;backdrop-filter:saturate(140%) blur(6px);border-bottom:2px solid var(--brand)}
    .wrap{max-width:1000px;margin:0 auto;padding:14px}
    h1{margin:8px 0;color:var(--brand)}
    .cta{text-align:center;margin:18px}
    .btn{display:inline-block;padding:10px 16px;border-radius:10px;background:var(--brand);color:#0b0b0f;text-decoration:none;font-weight:700}
    .section{margin:26px auto;padding:18px;max-width:1000px;border:1px solid var(--brand);border-radius:var(--radius);background:var(--card)}
    .section h2{color:var(--brand2);margin:0 0 10px}
    .video{margin:12px 0; display:inline-block; width:45%; vertical-align:top;}
    iframe{width:100%; aspect-ratio:16/9; border:0; border-radius:10px}
    footer{text-align:center;padding:24px;color:var(--muted)}

    /* Admin bar */
    .adminbar{display:flex;gap:8px;align-items:center}
    .ghost{background:transparent;border:1px dashed rgba(124,251,222,.5);color:var(--text);border-radius:10px;padding:8px 12px;cursor:pointer}
    .ok{background:linear-gradient(135deg,#22c55e,#a7f3d0);border:0;color:#08210f;border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer}
    .danger{background:linear-gradient(135deg,#ef4444,#fecaca);border:0;color:#280808;border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .input{background:#0f0f16;border:1px solid rgba(124,251,222,.35);color:var(--text);border-radius:10px;padding:8px 10px}
    .panel{display:none;margin:18px 0;padding:16px;border:1px solid rgba(124,251,222,.35);border-radius:12px;background:var(--panel)}
    .panel.show{display:block}
    .table{width:100%;border-collapse:collapse;margin-top:10px}
    .table th,.table td{border-bottom:1px solid rgba(124,251,222,.2);padding:8px;text-align:left}
    .hint{color:var(--muted);font-size:13px}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;background:rgba(124,251,222,.08);border:1px solid rgba(124,251,222,.25)}

    /* Responsive videos */
    @media (max-width:768px){
      .video{width:100%;}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <h1 class="row" style="flex:1 1 auto">CURSO BÁSICO DE CANVA <span class="pill">Vista pública</span></h1>
      <div class="adminbar">
        <button id="btnAdmin" class="ghost">Admin</button>
        <div id="loginBox" class="row" style="display:none">
          <input id="pwd" class="input" type="password" placeholder="Contraseña" />
          <button id="enter" class="ok">Entrar</button>
          <button id="cancel" class="ghost">Cancelar</button>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- ===== CONTENIDO PÚBLICO FIJO ===== -->
    <div class="section">
      <h2>Introducción</h2>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/nz_unjgg_CE" allowfullscreen></iframe><p>1 Creando una cuenta en Canva</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/EPz8eWfE4jE" allowfullscreen></iframe><p>2 Inicio en Canva - Barras, Elementos, Paneles</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/6e6_Uctc35A" allowfullscreen></iframe><p>3 Página de Edición - Distintos Paneles</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/CLjjxVcXeAU" allowfullscreen></iframe><p>1 Realizar un Diseño Personalizado, Post para Instagram</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/kn8m000eKo0" allowfullscreen></iframe><p>2 Crear Nuevas páginas y utilizar la Herramienta Posición</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/gX2oDsMmVio" allowfullscreen></iframe><p>3 Utilizar Marcos, Subir imágenes Propias</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/SCyOkZtb7Xk" allowfullscreen></iframe><p>4 Proyecto - Realiza un Diseño Personalizado</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/9H0RDqrXj58" allowfullscreen></iframe><p>5 Ejercicio del Proyecto</p></div>
      <div class="video"><iframe src="https://www.youtube-nocookie.com/embed/rfJSQxcKI9U" allowfullscreen></iframe><p>6 Cómo Descargar los Diseños - Todos los Formatos</p></div>
    </div>

    <div class="section">
      <h2>Básico</h2>
      <p class="hint">Aquí agregaremos los videos de la parte básica en tu versión pública.</p>
    </div>

    <div class="cta">
      <p>Si deseas adquirir Canva, consulta con un asesor haciendo clic en este botón:</p>
      <a class="btn" href="https://walink.co/70069f" target="_blank">Quiero adquirir Canva</a>
    </div>
    <!-- CONTENEDOR PARA SECCIONES DINÁMICAS (modo admin) -->
    <div id="dynSections"></div>

    <div class="cta">
      <p>Si deseas adquirir Canva, consulta con un asesor haciendo clic en este botón:</p>
      <a class="btn" href="https://walink.co/70069f" target="_blank">Quiero adquirir Canva</a>
    </div>

    <!-- PANEL ADMIN -->
    <section id="adminPanel" class="panel">
      <h2>Modo Administrador</h2>
      <p class="hint">Crea secciones y agrega videos. Los cambios se guardan en <b>tu navegador</b> (localStorage). Puedes exportar un HTML público para compartir.</p>

      <!-- Crear sección -->
      <div class="section" style="border-color: rgba(124,251,222,.35); background: #0f0f16;">
        <h3 style="margin-top:0;color:#7cfbde">Nueva sección</h3>
        <div class="row">
          <input id="secName" class="input" placeholder="Nombre de la sección (p. ej., Intermedio)" style="flex:1"/>
          <button id="addSec" class="ok">Agregar sección</button>
        </div>
        <p class="hint">Se crearán hasta 6 secciones (o más si lo necesitas). Puedes editar o borrar después.</p>
        <div id="secList" class="hint" style="margin-top:8px"></div>
      </div>

      <!-- Agregar video -->
      <div class="section" style="border-color: rgba(124,251,222,.35); background: #0f0f16;">
        <h3 style="margin-top:0;color:#7cfbde">Agregar video</h3>
        <div class="row" style="gap:8px">
          <select id="videoSec" class="input" style="min-width:220px"></select>
          <input id="videoTitle" class="input" placeholder="Título del video" style="flex:1"/>
          <input id="videoUrl" class="input" placeholder="URL de YouTube (https://...)" style="flex:2"/>
          <button id="addVideo" class="ok">Agregar</button>
        </div>
        <p class="hint">Consejo: Pega la URL completa de YouTube. Detectamos el ID automáticamente.</p>
      </div>

      <!-- Exportar / Importar -->
      <div class="row" style="margin:8px 0">
        <button id="btnExportJSON" class="ghost">Exportar JSON</button>
        <button id="btnImportJSON" class="ghost">Importar JSON</button>
        <button id="btnExportHTML" class="ok">Descargar página pública (HTML)</button>
        <button id="btnClearAll" class="danger">Borrar todo (dinámico)</button>
      </div>

      <!-- Vista previa de dinámicos -->
      <table class="table" id="tblDyn" style="display:none">
        <thead><tr><th>Sección</th><th>Título</th><th>URL</th><th></th></tr></thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <footer>
    <p>⚡ Hecho con ❤️ para tu curso de Canva</p>
  </footer>

  <script>
    const PASSWORD = 'a@97030625';
    const STORAGE_KEY = 'canva_dyn_sections_v1'; // donde guardamos lo que creas en admin

    const btnAdmin=document.getElementById('btnAdmin');
    const loginBox=document.getElementById('loginBox');
    const enter=document.getElementById('enter');
    const cancel=document.getElementById('cancel');
    const pwd=document.getElementById('pwd');
    const panel=document.getElementById('adminPanel');

    const secName = document.getElementById('secName');
    const addSec = document.getElementById('addSec');
    const secList = document.getElementById('secList');

    const videoSec = document.getElementById('videoSec');
    const videoTitle = document.getElementById('videoTitle');
    const videoUrl = document.getElementById('videoUrl');
    const addVideo = document.getElementById('addVideo');

    const btnExportJSON = document.getElementById('btnExportJSON');
    const btnImportJSON = document.getElementById('btnImportJSON');
    const btnExportHTML = document.getElementById('btnExportHTML');
    const btnClearAll = document.getElementById('btnClearAll');

    const tblDyn = document.getElementById('tblDyn');
    const tbody = tblDyn.querySelector('tbody');
    const dynSectionsWrap = document.getElementById('dynSections');

    let DATA = { sections: [], items: [] };

    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(DATA)); }
    function load(){ try{ const raw = localStorage.getItem(STORAGE_KEY); DATA = raw? JSON.parse(raw): {sections:[], items:[]}; }catch{ DATA={sections:[], items:[]}; } }

    function uid(){ return Math.random().toString(36).slice(2,9); }
    function ytIdFromUrl(u){ try{ const url = new URL(u); if(url.hostname.includes('youtu.be')) return url.pathname.slice(1); if(url.hostname.includes('youtube.com')) return url.searchParams.get('v'); }catch{} return null; }

    function refreshSecSelect(){
      videoSec.innerHTML='';
      DATA.sections.forEach(s=>{
        const o=document.createElement('option'); o.value=s.id; o.textContent=s.name; videoSec.appendChild(o);
      });
    }
    function refreshSecList(){
      if(!DATA.sections.length){ secList.textContent='(Sin secciones creadas aún)'; return; }
      secList.innerHTML = DATA.sections.map((s,i)=>`<span class="pill" style="margin:4px 6px 0 0; display:inline-flex">${i+1}. ${s.name} <button data-id="${s.id}" class="ghost" style="margin-left:8px">✕</button></span>`).join('');
      secList.querySelectorAll('button[data-id]').forEach(btn=>{
        btn.onclick=()=>{ const id=btn.getAttribute('data-id'); if(confirm('¿Eliminar sección y sus videos?')){ DATA.items = DATA.items.filter(it=>it.section!==id); DATA.sections = DATA.sections.filter(s=>s.id!==id); save(); renderAll(); } };
      });
    }
    function refreshTable(){
      const dict = Object.fromEntries(DATA.sections.map(s=>[s.id,s.name]));
      tbody.innerHTML = '';
      DATA.items.forEach((it,idx)=>{
        const tr=document.createElement('tr');
        tr.innerHTML = `<td>${dict[it.section]||it.section}</td><td>${it.title||''}</td><td><a href="${it.url}" target="_blank">${it.url}</a></td><td><button data-i="${idx}" class="danger">Eliminar</button></td>`;
        tbody.appendChild(tr);
      });
      tblDyn.style.display = DATA.items.length? 'table':'none';
      tbody.querySelectorAll('button[data-i]').forEach(b=>{
        b.onclick=()=>{ const i=+b.getAttribute('data-i'); if(confirm('¿Quitar este video?')){ DATA.items.splice(i,1); save(); renderAll(); } };
      });
    }
    function renderDynamic(){
      dynSectionsWrap.innerHTML='';
      if(!DATA.sections.length) { dynSectionsWrap.style.display='none'; return; }
      dynSectionsWrap.style.display='block';
      const bySec = {};
      DATA.sections.forEach(s=>bySec[s.id]=[]);
      DATA.items.forEach(it=>{ (bySec[it.section]||(bySec[it.section]=[])).push(it); });

      DATA.sections.forEach(sec=>{
        const box=document.createElement('div'); box.className='section';
        const h=document.createElement('h2'); h.textContent=sec.name; box.appendChild(h);
        (bySec[sec.id]||[]).forEach(it=>{
          const id = ytIdFromUrl(it.url) || it.id || '';
          const v=document.createElement('div'); v.className='video';
          if(id){ v.innerHTML=`<iframe src="https://www.youtube-nocookie.com/embed/${id}" allowfullscreen></iframe><p>${it.title||'Video'}</p>`; }
          else { v.innerHTML=`<a href="${it.url}" target="_blank">Abrir video</a>`; }
          box.appendChild(v);
        });
        dynSectionsWrap.appendChild(box);
      });
    }
    function renderAll(){ refreshSecSelect(); refreshSecList(); refreshTable(); renderDynamic(); }

    // Login admin
    btnAdmin.onclick=()=>{loginBox.style.display='flex';pwd.focus();}
    cancel.onclick=()=>{loginBox.style.display='none';pwd.value='';}
    enter.onclick=()=>{ if(pwd.value===PASSWORD){ panel.classList.add('show'); loginBox.style.display='none'; pwd.value=''; } else alert('Contraseña incorrecta'); }
    pwd.addEventListener('keydown',e=>{ if(e.key==='Enter') enter.click(); })

    // Crear sección
    addSec.onclick=()=>{
      const name = secName.value.trim();
      if(!name){ alert('Ponle un nombre a la sección'); return; }
      const id = name.toLowerCase().replace(/[^a-z0-9]+/g,'-')+ '-' + uid();
      DATA.sections.push({id, name, order: DATA.sections.length});
      secName.value=''; save(); renderAll();
    };

    // Agregar video
    addVideo.onclick=()=>{
      const section = videoSec.value;
      const title = videoTitle.value.trim();
      const url = videoUrl.value.trim();
      if(!section){ alert('Selecciona una sección'); return; }
      if(!url){ alert('Pega la URL del video'); return; }
      const id = ytIdFromUrl(url) || uid();
      DATA.items.push({ id, url, title, section, addedAt: Date.now() });
      videoTitle.value=''; videoUrl.value=''; save(); renderAll();
    };

    // Exportar / Importar / Limpiar
    btnExportJSON.onclick=()=>{
      const blob = new Blob([JSON.stringify(DATA,null,2)], {type:'application/json'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='videos.json'; a.click(); URL.revokeObjectURL(a.href);
    };
    btnImportJSON.onclick=()=>{
      const inp=document.createElement('input'); inp.type='file'; inp.accept='.json,application/json';
      inp.onchange=async (e)=>{ const f=e.target.files[0]; if(!f) return; const txt=await f.text(); try{ const obj=JSON.parse(txt); if(obj.sections&&obj.items){ DATA=obj; save(); renderAll(); } else alert('El JSON debe tener {sections:[], items:[]}'); }catch{ alert('JSON inválido'); } };
      inp.click();
    };
    btnClearAll.onclick=()=>{ if(confirm('¿Borrar todas las secciones y videos creados en admin?')){ DATA={sections:[], items:[]}; save(); renderAll(); } };

    btnExportHTML.onclick=()=>{
      // Construye un HTML estático (mezclando lo fijo + dinámico)
      function esc(s=''){ return String(s).replace(/[&<>]/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;"}[m])); }
      const bySec={}; DATA.sections.forEach(s=>bySec[s.id]=[]); DATA.items.forEach(it=>{ (bySec[it.section]||(bySec[it.section]=[])).push(it); });
      let dynHtml='';
      DATA.sections.forEach(sec=>{
        const vids=(bySec[sec.id]||[]).map(it=>{
          const vid = ytIdFromUrl(it.url) || it.id || '';
          const iframe = vid? `<iframe src="https://www.youtube-nocookie.com/embed/${vid}" allowfullscreen></iframe>` : `<a href="${esc(it.url)}" target="_blank">Abrir video</a>`;
          return `<div class=\"video\">${iframe}<p>${esc(it.title||'Video')}</p></div>`;
        }).join('');
        dynHtml += `
<div class=\"section\">
  <h2>${esc(sec.name)}</h2>
  ${vids || '<p class=\"hint\">(Sin videos aún)</p>'}
</div>`;
      });

      const html = `<!DOCTYPE html>
<html lang=\"es\">
<head>
<meta charset=\"UTF-8\"/><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/><title>Curso Básico de Canva</title>
<style>:root{--bg:#0b0b0f;--panel:#12121a;--card:#161621;--text:#e9e9f1;--muted:#a3a3b2;--brand:#7cfbde;--brand2:#8b5cf6;--radius:14px}*{box-sizing:border-box}body{margin:0;background:#0b0b0f;color:var(--text);font-family:Poppins,system-ui,Segoe UI,Roboto}header{padding:20px;text-align:center;background:#12121a;border-bottom:2px solid var(--brand)}h1{margin:0;color:var(--brand)}.section{margin:26px auto;padding:18px;max-width:1000px;border:1px solid var(--brand);border-radius:var(--radius);background:#161621}.section h2{color:#8b5cf6;margin:0 0 10px}.video{margin:12px 0;display:inline-block;width:45%;vertical-align:top}iframe{width:100%;aspect-ratio:16/9;border:0;border-radius:10px}.cta{text-align:center;margin:18px}.btn{display:inline-block;padding:10px 16px;border-radius:10px;background:#7cfbde;color:#0b0b0f;text-decoration:none;font-weight:700}footer{text-align:center;padding:24px;color:#a3a3b2}@media (max-width:768px){.video{width:100%}}</style>
</head>
<body>
<header><h1>CURSO BÁSICO DE CANVA</h1></header>
<main>
<!-- Contenido fijo se inserta manualmente en tu index actual -->
${dynHtml}
<div class=\"cta\"><p>Si deseas adquirir Canva, consulta con un asesor haciendo clic en este botón:</p><a class=\"btn\" href=\"https://walink.co/70069f\" target=\"_blank\">Quiero adquirir Canva</a></div>
</main>
<footer><p>⚡ Hecho con ❤️ para tu curso de Canva</p></footer>
</body></n</html>`;
      const blob = new Blob([html], {type:'text/html'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='index_publico.html'; a.click(); URL.revokeObjectURL(a.href);
    };

    // Init
    load(); renderAll();
  </script>
</body>
</html>
