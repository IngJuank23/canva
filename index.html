<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Curso Básico de Canva</title>
  <meta name="description" content="Curso Básico de Canva: videos por secciones, acceso de administrador para agregar contenido y enlace para obtener Canva con asesor." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#0b0b0f;       /* negro profundo */
      --panel:#12121a;    /* panel oscuro */
      --card:#161621;
      --muted:#a3a3b2;
      --text:#e9e9f1;     /* texto claro */
      --brand:#7cfbde;    /* acento menta-neón */
      --brand-2:#8b5cf6;  /* acento lila */
      --danger:#ef4444;
      --ok:#22c55e;
      --shadow: 0 10px 30px rgba(0,0,0,.35), 0 0 40px rgba(124,251,222,.05);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial; 
      background: radial-gradient(1200px 800px at 10% -10%, rgba(139,92,246,.12), transparent 40%),
                  radial-gradient(900px 600px at 110% 10%, rgba(124,251,222,.10), transparent 40%),
                  var(--bg);
      color:var(--text); line-height:1.6;
    }
    a{color:var(--brand)}
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter:saturate(140%) blur(8px);
      background: linear-gradient(180deg, rgba(13,13,20,.9), rgba(13,13,20,.6));
      border-bottom:1px solid rgba(124,251,222,.15);
    }
    .wrap{max-width:1100px; margin:0 auto; padding:18px 18px}
    .row{display:flex; align-items:center; gap:14px; justify-content:space-between}
    .title{font-size:clamp(22px,3vw,34px); font-weight:800; letter-spacing:.3px}
    .admin-btn{
      display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; 
      background:linear-gradient(135deg, rgba(124,251,222,.15), rgba(139,92,246,.18));
      border:1px solid rgba(124,251,222,.25); color:var(--text); cursor:pointer;
      box-shadow:var(--shadow); transition:transform .15s ease, box-shadow .2s ease;
    }
    .admin-btn:hover{ transform:translateY(-1px) }

    .hero{padding:40px 18px 22px}
    .hero .box{
      background:linear-gradient(135deg, rgba(124,251,222,.06), rgba(139,92,246,.06));
      border:1px solid rgba(124,251,222,.18);
      border-radius:var(--radius); padding:28px; box-shadow:var(--shadow);
    }
    .hero h1{margin:0 0 6px; font-size:clamp(28px,5vw,44px)}
    .hero p{margin:0; color:var(--muted)}

    .cta{
      margin:26px 0 8px; display:flex; flex-wrap:wrap; gap:12px; align-items:center
    }
    .cta .note{color:var(--muted)}
    .cta .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:12px 18px; border-radius:14px; font-weight:700; 
      background:linear-gradient(135deg, var(--brand), #b4ffe5);
      color:#0b0b0f; border:none; cursor:pointer; text-decoration:none;
      box-shadow:0 10px 25px rgba(124,251,222,.25), 0 0 0 2px rgba(124,251,222,.25) inset;
      transition: transform .08s ease;
    }
    .cta .btn:active{ transform: translateY(1px) }

    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(290px,1fr)); gap:16px; margin:24px 0}
    .card{
      background:var(--card); border:1px solid rgba(124,251,222,.18); border-radius:var(--radius);
      box-shadow:var(--shadow); overflow:hidden; display:flex; flex-direction:column
    }
    .card header{position:initial; backdrop-filter:none; background:transparent; border:none}
    .card h3{margin:16px; font-size:18px}
    .card .content{padding:0 16px 16px}
    .card .desc{color:var(--muted); margin:0 16px 12px}

    details.section{background:transparent; border-top:1px dashed rgba(124,251,222,.25)}
    details[open] > summary .chev{transform:rotate(90deg)}
    summary{
      list-style:none; cursor:pointer; display:flex; align-items:center; justify-content:space-between;
      padding:16px; gap:12px; font-weight:700; letter-spacing:.3px
    }
    summary::-webkit-details-marker{display:none}
    .chev{transition:transform .18s ease}

    .video-list{display:grid; gap:12px}
    .video-embed{aspect-ratio:16/9; width:100%; border:0; border-radius:12px}

    .panel{background:var(--panel); border:1px solid rgba(124,251,222,.2); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow)}
    .panel h2{margin:0 0 8px}
    .row-fields{display:grid; gap:12px; grid-template-columns:1fr}
    .row-2{display:grid; gap:12px; grid-template-columns:1fr 1fr}
    .input, textarea{
      width:100%; background:#0f0f16; color:var(--text); border:1px solid rgba(124,251,222,.25);
      border-radius:12px; padding:12px 12px; outline:none
    }
    textarea{min-height:90px; resize:vertical}
    .small{font-size:12px; color:var(--muted)}
    .actions{display:flex; gap:10px; flex-wrap:wrap}
    .btn-ghost{background:transparent; border:1px dashed rgba(124,251,222,.35); color:var(--text); border-radius:12px; padding:10px 14px; cursor:pointer}
    .btn-ok{background:linear-gradient(135deg, #22c55e, #a7f3d0); color:#08210f; border:none; border-radius:12px; padding:10px 14px; font-weight:700; cursor:pointer}
    .btn-danger{background:linear-gradient(135deg, #ef4444, #fecaca); color:#280808; border:none; border-radius:12px; padding:10px 14px; font-weight:700; cursor:pointer}

    .login{display:none; gap:10px; align-items:center}
    .login.show{display:flex}

    footer{padding:24px 18px 60px; color:var(--muted); text-align:center}
    .pill{display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; background:rgba(124,251,222,.08); border:1px solid rgba(124,251,222,.25)}

    /* mobile tweaks */
    @media (max-width:560px){
      .cta{flex-direction:column; align-items:stretch}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <div class="title">CURSO BÁSICO DE CANVA</div>
      <div class="actions">
        <button id="adminToggle" class="admin-btn" title="Entrar a modo administrador" aria-label="Modo administrador">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill="currentColor"/><path d="M19.4 15a7.5 7.5 0 0 0 .1-1 7.5 7.5 0 0 0-.1-1l2.1-1.6a.5.5 0 0 0 .1-.6l-2-3.5a.5.5 0 0 0-.6-.2l-2.5 1a7.7 7.7 0 0 0-1.7-1l-.4-2.7a.5.5 0 0 0-.5-.4H9.7a.5.5 0 0 0-.5.4l-.4 2.7a7.7 7.7 0 0 0-1.7 1l-2.5-1a.5.5 0 0 0-.6.2l-2 3.5a.5.5 0 0 0 .1.6L2.2 13a7.5 7.5 0 0 0-.1 1 7.5 7.5 0 0 0 .1 1l-2.1 1.6a.5.5 0 0 0-.1.6l2 3.5a.5.5 0 0 0 .6.2l2.5-1a7.7 7.7 0 0 0 1.7 1l.4 2.7a.5.5 0 0 0 .5.4h4.6a.5.5 0 0 0 .5-.4l.4-2.7a7.7 7.7 0 0 0 1.7-1l2.5 1a.5.5 0 0 0 .6-.2l2-3.5a.5.5 0 0 0-.1-.6L19.4 15Z" fill="currentColor"/></svg>
          Admin
        </button>
        <div id="login" class="login" aria-live="polite">
          <input id="pwd" class="input" type="password" placeholder="Contraseña" aria-label="Contraseña de administrador" />
          <button id="enter" class="btn-ok">Entrar</button>
          <button id="cancelLogin" class="btn-ghost">Cancelar</button>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="box">
        <h1>Bienvenido/a al <span style="color:var(--brand)">Curso Básico de Canva</span></h1>
        <p>Aprende a crear diseños impactantes paso a paso. Explora las secciones de introducción, las partes básicas y avanza a tu ritmo.</p>
        <div class="cta">
          <span class="note">Si deseas adquirir Canva, consulta con un asesor haciendo clic en este botón</span>
          <a class="btn" href="https://walink.co/70069f" target="_blank" rel="noopener" aria-label="Abrir WhatsApp para adquirir Canva">Quiero adquirir Canva</a>
        </div>
      </div>
    </section>

    <!-- Contenedor de secciones renderizadas -->
    <section id="sections" class="grid" aria-live="polite"></section>

    <!-- Panel de administración (se muestra solo en modo admin) -->
    <section id="adminPanel" class="panel" style="display:none; margin-top:28px;">
      <h2>Modo Administrador</h2>
      <p class="small">Agrega nuevas secciones y videos. Todo se guarda en tu navegador (localStorage). Ideal para pruebas rápidas; para producción considera conectar una base de datos.</p>

      <div class="row-fields" style="margin-top:10px">
        <input id="sectionTitle" class="input" placeholder="Título de la sección (p. ej., Introducción, Parte Básica)" />
        <textarea id="sectionDesc" class="input" placeholder="Descripción opcional de la sección"></textarea>
        <input id="sectionVideos" class="input" placeholder="URLs de videos (separadas por coma). Soporta YouTube; se incrustan automáticamente." />
        <div class="actions">
          <button id="addSection" class="btn-ok">Agregar sección</button>
          <button id="exportData" class="btn-ghost" title="Exportar JSON">Exportar</button>
          <button id="importData" class="btn-ghost" title="Importar JSON">Importar</button>
          <button id="resetAll" class="btn-danger" title="Borrar todo">Borrar todo</button>
          <button id="logout" class="btn-ghost">Salir de admin</button>
        </div>
        <p class="small">Sugerencia: Puedes empezar con dos secciones: “Introducción” (3 videos) y “Parte básica” (4 videos). Después, agrega más según tu plan.</p>
      </div>
    </section>
  </main>

  <footer>
    <span class="pill">⚡ Hecho con ❤️ para tu curso de Canva</span>
  </footer>

  <script>
    const PASSWORD = "a@97030625"; // *Clave solicitada*
    const STORAGE_KEY = "curso_canva_sections_v1";

    // Estado en memoria
    let isAdmin = false;
    let sections = [];

    // Elementos
    const loginBox = document.getElementById('login');
    const adminToggle = document.getElementById('adminToggle');
    const enterBtn = document.getElementById('enter');
    const cancelLoginBtn = document.getElementById('cancelLogin');
    const pwdInput = document.getElementById('pwd');

    const adminPanel = document.getElementById('adminPanel');
    const sectionsWrap = document.getElementById('sections');

    const sectionTitle = document.getElementById('sectionTitle');
    const sectionDesc = document.getElementById('sectionDesc');
    const sectionVideos = document.getElementById('sectionVideos');
    const addSectionBtn = document.getElementById('addSection');
    const exportBtn = document.getElementById('exportData');
    const importBtn = document.getElementById('importData');
    const resetBtn = document.getElementById('resetAll');
    const logoutBtn = document.getElementById('logout');

    // Utilidades
    const save = () => localStorage.setItem(STORAGE_KEY, JSON.stringify(sections));
    const load = () => {
      try{ const raw = localStorage.getItem(STORAGE_KEY); sections = raw ? JSON.parse(raw) : []; }
      catch{ sections = []; }
    };

    const ytIdFromUrl = (url) => {
      try{
        const u = new URL(url);
        if (u.hostname.includes('youtu.be')) return u.pathname.slice(1);
        if (u.hostname.includes('youtube.com')){
          if (u.searchParams.get('v')) return u.searchParams.get('v');
          const parts = u.pathname.split('/');
          const idx = parts.indexOf('embed');
          if (idx !== -1 && parts[idx+1]) return parts[idx+1];
        }
      }catch{}
      return null;
    };

    const normalizeVideos = (str) => str
        .split(',')
        .map(s=>s.trim())
        .filter(Boolean)
        .map(url=>({ url }));

    function render(){
      sectionsWrap.innerHTML = '';
      if(!sections.length){
        const empty = document.createElement('div');
        empty.className = 'card';
        empty.innerHTML = `
          <h3 style="margin:16px;">Aún no hay secciones</h3>
          <p class="desc">Inicia sesión como administrador para crear la primera sección del curso.</p>
        `;
        sectionsWrap.appendChild(empty);
        return;
      }

      sections.forEach((sec, idx) => {
        const card = document.createElement('article');
        card.className = 'card';

        const header = document.createElement('header');
        const sum = document.createElement('summary');
        sum.innerHTML = `<span>${sec.title || 'Sección sin título'}</span> <span class="chev">▶</span>`;

        const details = document.createElement('details');
        details.className = 'section';
        details.appendChild(sum);

        if (sec.desc){
          const p = document.createElement('p');
          p.className = 'desc';
          p.textContent = sec.desc;
          details.appendChild(p);
        }

        const list = document.createElement('div');
        list.className = 'video-list content';

        if(Array.isArray(sec.videos)){
          sec.videos.forEach((v, vi) => {
            const vidId = ytIdFromUrl(v.url);
            const holder = document.createElement('div');
            if(vidId){
              holder.innerHTML = `<iframe class="video-embed" loading="lazy" src="https://www.youtube.com/embed/${vidId}" allowfullscreen title="Video ${vi+1} - ${sec.title}"></iframe>`;
            }else{
              holder.innerHTML = `<a href="${v.url}" target="_blank" rel="noopener">Abrir video ${vi+1}</a>`;
            }

            // Controles de admin para cada video
            if(isAdmin){
              const controls = document.createElement('div');
              controls.className = 'actions';
              controls.style.margin = '6px 0 14px';

              const del = document.createElement('button');
              del.className = 'btn-danger';
              del.textContent = 'Eliminar video';
              del.onclick = () => {
                if(confirm('¿Eliminar este video?')){
                  sec.videos.splice(vi,1); save(); render();
                }
              };

              controls.appendChild(del);
              holder.appendChild(controls);
            }

            list.appendChild(holder);
          });
        }

        // Controles de admin por sección
        if(isAdmin){
          const controls = document.createElement('div');
          controls.className = 'actions';
          controls.style.margin = '10px 16px 18px';

          const addVid = document.createElement('button');
          addVid.className = 'btn-ghost';
          addVid.textContent = 'Agregar video a esta sección';
          addVid.onclick = () => {
            const url = prompt('Pega la URL del video (YouTube u otro).');
            if(url){
              sec.videos = sec.videos || [];
              sec.videos.push({url});
              save(); render();
            }
          };

          const editSec = document.createElement('button');
          editSec.className = 'btn-ghost';
          editSec.textContent = 'Editar sección';
          editSec.onclick = () => {
            const newTitle = prompt('Nuevo título de sección:', sec.title || '');
            if(newTitle===null) return;
            const newDesc = prompt('Nueva descripción (opcional):', sec.desc || '');
            sec.title = newTitle.trim();
            sec.desc = (newDesc||'').trim();
            save(); render();
          };

          const remove = document.createElement('button');
          remove.className = 'btn-danger';
          remove.textContent = 'Eliminar sección';
          remove.onclick = () => {
            if(confirm('¿Eliminar la sección completa?')){
              sections.splice(idx,1); save(); render();
            }
          };

          controls.append(addVid, editSec, remove);
          list.appendChild(controls);
        }

        card.appendChild(details);
        details.appendChild(list);
        sectionsWrap.appendChild(card);
      });
    }

    // Autenticación visual simple
    function showLogin(show){ loginBox.classList.toggle('show', !!show); if(show){ pwdInput.focus(); } }
    function setAdmin(on){
      isAdmin = !!on;
      adminPanel.style.display = isAdmin ? 'block' : 'none';
      render();
    }

    adminToggle.addEventListener('click', ()=>{
      if(isAdmin){
        setAdmin(false);
      }else{
        showLogin(true);
      }
    });

    enterBtn.addEventListener('click', ()=>{
      if(pwdInput.value === PASSWORD){
        showLogin(false); setAdmin(true); pwdInput.value='';
      }else{
        alert('Contraseña incorrecta');
      }
    });
    cancelLoginBtn.addEventListener('click', ()=>{ showLogin(false); pwdInput.value=''; });
    pwdInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') enterBtn.click(); });

    // Acciones del panel admin
    addSectionBtn.addEventListener('click', ()=>{
      const title = sectionTitle.value.trim();
      const desc = sectionDesc.value.trim();
      const vids = normalizeVideos(sectionVideos.value);
      if(!title){ alert('Ponle un título a la sección.'); return; }
      sections.push({ title, desc, videos: vids });
      save(); render();
      sectionTitle.value = ''; sectionDesc.value=''; sectionVideos.value='';
    });

    exportBtn.addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(sections, null, 2)], {type:'application/json'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'curso_canva_secciones.json'; a.click(); URL.revokeObjectURL(a.href);
    });

    importBtn.addEventListener('click', ()=>{
      const inp = document.createElement('input'); inp.type='file'; inp.accept='.json,application/json';
      inp.onchange = async (e)=>{
        const file = e.target.files[0]; if(!file) return;
        const text = await file.text();
        try{
          const data = JSON.parse(text);
          if(Array.isArray(data)){
            sections = data; save(); render();
          }else{ alert('El JSON debe ser un arreglo de secciones.'); }
        }catch(err){ alert('JSON inválido.'); }
      };
      inp.click();
    });

    resetBtn.addEventListener('click', ()=>{
      if(confirm('¿Borrar todas las secciones guardadas?')){
        sections = []; save(); render();
      }
    });

    logoutBtn.addEventListener('click', ()=>{ setAdmin(false); });

    // Inicializar
    load();
    // Si no hay datos, sugerimos estructura base (sin videos) solo una vez
    if(!sections.length){
      sections = [
        { title: 'Introducción', desc: 'Primera toma de contacto con Canva: qué es y cómo funciona.', videos: [] },
        { title: 'Parte básica', desc: 'Herramientas esenciales y primeros diseños prácticos.', videos: [] }
      ];
      save();
    }
    render();
  </script>
</body>
</html>
